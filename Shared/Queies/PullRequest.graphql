query PullRequests(
    $owner: String!,
    $name: String!
) {
    repository(
        owner: $owner,
        name: $name
    ) {
        pullRequests(
            first: 20,
            states: OPEN
        ) {
            totalCount
            nodes {
                ...PullRequestFragment
            }
        }
    }
}

fragment PullRequestFragment on PullRequest {
  id
  number
  title
  isDraft
  createdAt
  author {
    ...ActorFragment
  }
  repository {
    name
    owner {
      login
    }
  }
  latestReviews(first: 20) {
    totalCount
    nodes {
      ...PullRequestReviewFragment
    }
  }
  reviewRequests(first: 20) {
    totalCount
    nodes {
        ...ReviewRequestFragment
    }
  }
}

fragment PullRequestReviewFragment on PullRequestReview {
  id
  author {
    ...ActorFragment
  }
  state
}

query Reviewers(
    $owner: String!,
    $name: String!,
    $number: Int!
) {
    repository(
        owner: $owner,
        name: $name
    ) {
        pullRequest(number: $number) {
            ...PullRequestFragment
        }
    }
}

fragment ReviewRequestFragment on ReviewRequest {
  id
  requestedReviewer {
    ...ActorFragment
  }
}
