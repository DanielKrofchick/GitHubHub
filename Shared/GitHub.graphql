query User($login: String!) {
    user(login: $login) {
        ...UserFragment
    }
}

fragment UserFragment on User {
    id
    login
    name
	avatarUrl
}

query Organizations($login: String!) {
    user(login: $login) {
        organizations(first: 10) {
            totalCount
            nodes {
                ...OrganizationFragment
            }
        }
    }
}

fragment OrganizationFragment on Organization {
    id
    login
    name
    avatarUrl
}

query Repositories($login: String!) {
    organization(login: $login) {
        repositories(first: 10) {
            nodes {
                ...RepositoryFragment
            }
        }
    }
}

fragment RepositoryFragment on Repository {
    id
    name
    owner {
        login
    }
}

query PullRequests(
    $owner: String!,
    $name: String!
) {
    repository(
        owner: $owner,
        name: $name
    ) {
        pullRequests(
            first: 10,
            states: OPEN
        ) {
            totalCount
            nodes {
                ...PullRequestFragment
            }
        }
    }
}

fragment PullRequestFragment on PullRequest {
    id
    number
    title
    isDraft
    repository {
        name
        owner {
            login
        }
    }
}

query Reviewers(
    $owner: String!,
    $name: String!,
    $number: Int!
) {
    repository(
        owner: $owner,
        name: $name
    ) {
        pullRequest(number: $number) {
            latestOpinionatedReviews(first: 10) {
                totalCount
                nodes {
                    author {
                        ...ReviewerFragment
                    }
                    state
                }
            }
            title
            number
            repository {
                name
                owner {
                    login
                }
            }
        }
    }
}

fragment ReviewerFragment on User {
    id
    login
    name
    avatarUrl
}
